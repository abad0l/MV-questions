<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MV Questions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--dark-color);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 10px 0;
            height: 8px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--success-color));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question-counter {
            text-align: center;
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .question-container {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .question-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-color), var(--success-color));
        }
        
        h2 {
            color: var(--secondary-color);
            margin-top: 0;
            font-size: 1.3rem;
            line-height: 1.4;
        }
        
        .options {
            margin: 20px 0;
        }
        
        .option {
            padding: 12px;
            margin: 8px 0;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        
        .option:hover {
            background-color: #f8f9fa;
            border-color: var(--primary-color);
        }
        
        .option.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .option.correct {
            background-color: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }
        
        .option.incorrect {
            background-color: var(--danger-color);
            color: white;
            border-color: var(--danger-color);
        }
        
        .option-letter {
            background-color: white;
            color: var(--dark-color);
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .selected .option-letter,
        .correct .option-letter,
        .incorrect .option-letter {
            color: white;
            background-color: rgba(255,255,255,0.3);
        }
        
        .feedback {
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            display: none;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background-color: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
        }
        
        .feedback.incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            color: #C62828;
        }
        
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        button:disabled {
            background: #cccccc;
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }
        
        button i {
            margin-left: 5px;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-box {
            text-align: center;
            padding: 5px 15px;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 3px 0;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.8rem;
        }
        
        .hint-btn {
            background: transparent;
            color: var(--primary-color);
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
        }
        
        .countdown {
            display: inline-block;
            width: 30px;
            text-align: center;
            font-weight: bold;
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MV Questions</h1>
            <p>سمي الله وابتدي الحل</p>
        </header>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="correct-count">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="incorrect-count">0</div>
                <div class="stat-label">Wrong</div>
            </div>
        </div>
        
        <div class="question-counter">
            Question <span id="current-question">1</span>/<span id="total-questions">50</span>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="question-container">
            <h2 id="question-text"></h2>
            <div class="options" id="options-container"></div>
            
            <div class="feedback" id="feedback"></div>
            
            <div class="buttons">
                <button id="prev-btn" onclick="prevQuestion()">
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button class="hint-btn" onclick="showHint()">
                    <i class="fas fa-lightbulb"></i>
                </button>
                <button id="next-btn" onclick="nextQuestion()">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // قاعدة بيانات الأسئلة
        let questions = [
            {
                question: "What is the primary purpose of mechanical ventilation?",
                options: {
                    A: "To replace the heart's pumping action",
                    B: "To facilitate O₂ and CO₂ transport between the atmosphere and alveoli",
                    C: "To administer IV medications",
                    D: "To monitor blood pressure"
                },
                correctAnswer: "B",
                explanation: "The primary purpose of mechanical ventilation is to facilitate gas exchange (O₂ and CO₂) between the atmosphere and alveoli when the patient cannot do so effectively on their own."
            },
            {
                question: "Which of the following is NOT an indication for mechanical ventilation?",
                options: {
                    A: "Respiratory muscle fatigue",
                    B: "Bronchospasm",
                    C: "Hypertension",
                    D: "Opioid overdose"
                },
                correctAnswer: "C",
                explanation: "Hypertension is not an indication for mechanical ventilation. Indications include respiratory failure, apnea, respiratory muscle fatigue, and conditions like opioid overdose causing respiratory depression."
            },
            {
                question: "What is the normal range for respiratory rate (breaths/min)?",
                options: {
                    A: "5-10",
                    B: "12-20",
                    C: "25-35",
                    D: "40-50"
                },
                correctAnswer: "B",
                explanation: "The normal respiratory rate for adults is 12-20 breaths per minute."
            },
            {
                question: "A PaO₂ < _____ mmHg on room air is a criterion for initiating mechanical ventilation.",
                options: {
                    A: "60",
                    B: "50",
                    C: "70",
                    D: "80"
                },
                correctAnswer: "B",
                explanation: "A PaO₂ < 50 mmHg on room air is one criterion for initiating mechanical ventilation, indicating severe hypoxemia."
            },
            {
                question: "Which type of ventilator creates negative pressure on the chest?",
                options: {
                    A: "Positive pressure ventilator",
                    B: "Iron lung",
                    C: "CPAP machine",
                    D: "BiPAP machine"
                },
                correctAnswer: "B",
                explanation: "The iron lung is a negative pressure ventilator that creates negative pressure around the chest to draw air into the lungs."
            },
            {
                question: "Which ventilator setting guarantees a predefined minute volume?",
                options: {
                    A: "Pressure-cycled",
                    B: "Volume-cycled",
                    C: "Time-cycled",
                    D: "Flow-cycled"
                },
                correctAnswer: "B",
                explanation: "Volume-cycled ventilation delivers a preset tidal volume with each breath, guaranteeing a specific minute volume."
            },
            {
                question: "What is the typical tidal volume setting for a mechanically ventilated patient (mL/kg)?",
                options: {
                    A: "1-2",
                    B: "4-8",
                    C: "10-15",
                    D: "20-25"
                },
                correctAnswer: "B",
                explanation: "The typical tidal volume setting is 4-8 mL/kg of ideal body weight to prevent volutrauma."
            },
            {
                question: "Which alarm indicates a possible kinked ventilator tube?",
                options: {
                    A: "Low-pressure alarm",
                    B: "High-pressure alarm",
                    C: "Apnea alarm",
                    D: "Oxygen alarm"
                },
                correctAnswer: "B",
                explanation: "A high-pressure alarm suggests increased airway resistance, which could be caused by a kinked tube, secretions, or bronchospasm."
            },
            {
                question: "What is the first nursing action if a high-pressure alarm sounds?",
                options: {
                    A: "Silence the alarm and ignore it",
                    B: "Check for secretions and suction if needed",
                    C: "Increase the FiO₂ to 100%",
                    D: "Disconnect the patient from the ventilator"
                },
                correctAnswer: "B",
                explanation: "The first action should be to check for and clear any secretions, as this is the most common cause of high-pressure alarms."
            },
            {
                question: "Which of the following is a sign of weaning intolerance?",
                options: {
                    A: "Respiratory rate < 10/min",
                    B: "Heart rate increase > 20 bpm",
                    C: "SpO₂ > 95%",
                    D: "Normal tidal volume"
                },
                correctAnswer: "B",
                explanation: "A heart rate increase > 20 bpm is a sign of weaning intolerance, indicating the patient may not be ready for extubation."
            },
            {
                question: "What is the purpose of a 'sigh' on a ventilator?",
                options: {
                    A: "To decrease oxygenation",
                    B: "To prevent atelectasis",
                    C: "To reduce tidal volume",
                    D: "To increase CO₂ retention"
                },
                correctAnswer: "B",
                explanation: "Sigh breaths deliver larger tidal volumes periodically to prevent atelectasis by reinflating collapsed alveoli."
            },
            {
                question: "Which of the following is a complication of mechanical ventilation?",
                options: {
                    A: "Hypertension",
                    B: "Barotrauma",
                    C: "Hypoglycemia",
                    D: "Bradycardia"
                },
                correctAnswer: "B",
                explanation: "Barotrauma (lung injury from high pressures) is a potential complication of mechanical ventilation."
            },
            {
                question: "What is the normal I:E ratio in mechanical ventilation?",
                options: {
                    A: "1:1",
                    B: "1:2 or 1:3",
                    C: "2:1",
                    D: "3:1"
                },
                correctAnswer: "B",
                explanation: "The normal inspiratory to expiratory (I:E) ratio is 1:2 or 1:3, allowing adequate time for exhalation."
            },
            {
                question: "Which parameter is monitored to assess lung compliance?",
                options: {
                    A: "Peak airway pressure (Paw)",
                    B: "Plateau pressure (Pplat)",
                    C: "Respiratory rate",
                    D: "Tidal volume"
                },
                correctAnswer: "B",
                explanation: "Plateau pressure (measured during an inspiratory hold) reflects lung compliance, while peak pressure reflects both compliance and airway resistance."
            },
            {
                question: "What is the most common cause of a low-pressure alarm?",
                options: {
                    A: "Secretions in the airway",
                    B: "Disconnected tubing",
                    C: "Bronchospasm",
                    D: "High PEEP"
                },
                correctAnswer: "B",
                explanation: "A low-pressure alarm typically indicates a circuit disconnection or leak."
            },
            {
                question: "Which weaning method involves gradual reduction of ventilator breaths?",
                options: {
                    A: "T-piece trial",
                    B: "SIMV",
                    C: "CPAP",
                    D: "PSV"
                },
                correctAnswer: "B",
                explanation: "Synchronized Intermittent Mandatory Ventilation (SIMV) gradually reduces the number of ventilator-delivered breaths."
            },
            {
                question: "What is the minimum vital capacity (mL/kg) required for weaning?",
                options: {
                    A: "<5",
                    B: "10-15",
                    C: "20-25",
                    D: "30-35"
                },
                correctAnswer: "B",
                explanation: "A vital capacity of 10-15 mL/kg is generally required for successful weaning."
            },
            {
                question: "Which condition may require noninvasive ventilation?",
                options: {
                    A: "Cardiac arrest",
                    B: "Severe ARDS",
                    C: "COPD exacerbation",
                    D: "Pneumothorax"
                },
                correctAnswer: "C",
                explanation: "COPD exacerbations are a common indication for noninvasive ventilation (e.g., BiPAP)."
            },
            {
                question: "What is the primary risk of high FiO₂ (>60%)?",
                options: {
                    A: "Hypotension",
                    B: "Oxygen toxicity",
                    C: "Hypercapnia",
                    D: "Hypoglycemia"
                },
                correctAnswer: "B",
                explanation: "High FiO₂ (>60%) for prolonged periods can cause oxygen toxicity and lung damage."
            },
            {
                question: "Which of the following is NOT a nursing role during weaning?",
                options: {
                    A: "Monitoring vital signs",
                    B: "Keeping the patient supine",
                    C: "Providing reassurance",
                    D: "Assessing ABGs"
                },
                correctAnswer: "B",
                explanation: "Patients should be positioned upright (not supine) during weaning to optimize breathing mechanics."
            },
            {
                question: "What does a PaO₂/FiO₂ ratio <250 indicate?",
                options: {
                    A: "Normal oxygenation",
                    B: "Severe hypoxemia",
                    C: "Hypercapnia",
                    D: "Metabolic alkalosis"
                },
                correctAnswer: "B",
                explanation: "A PaO₂/FiO₂ ratio <250 indicates acute lung injury/impairment (normal is >300)."
            },
            {
                question: "Which ventilator mode allows the patient to trigger breaths?",
                options: {
                    A: "Controlled mandatory ventilation (CMV)",
                    B: "Assist-control (A/C)",
                    C: "Pressure support (PS)",
                    D: "Volume control (VC)"
                },
                correctAnswer: "B",
                explanation: "Assist-control allows patient-triggered breaths while guaranteeing a minimum rate."
            },
            {
                question: "What is the primary disadvantage of pressure-cycled ventilation?",
                options: {
                    A: "Risk of volutrauma",
                    B: "Inconsistent tidal volume",
                    C: "High cost",
                    D: "Requires intubation"
                },
                correctAnswer: "B",
                explanation: "Pressure-cycled ventilation may deliver inconsistent tidal volumes if lung compliance changes."
            },
            {
                question: "What is the first step if a ventilator fails?",
                options: {
                    A: "Call the physician",
                    B: "Manually ventilate the patient",
                    C: "Increase FiO₂",
                    D: "Silence the alarm"
                },
                correctAnswer: "B",
                explanation: "Immediately manually ventilate with a bag-valve-mask while troubleshooting the ventilator."
            },
            {
                question: "Which condition is a contraindication for noninvasive ventilation?",
                options: {
                    A: "Asthma",
                    B: "Facial trauma",
                    C: "COPD",
                    D: "Pneumonia"
                },
                correctAnswer: "B",
                explanation: "Facial trauma is a contraindication due to inability to achieve proper mask seal."
            },
            {
                question: "What is the normal pH range for arterial blood gases?",
                options: {
                    A: "7.20-7.30",
                    B: "7.35-7.45",
                    C: "7.50-7.60",
                    D: "7.00-7.10"
                },
                correctAnswer: "B",
                explanation: "Normal arterial pH is 7.35-7.45."
            },
            {
                question: "Which of the following increases the risk of ventilator-associated pneumonia (VAP)?",
                options: {
                    A: "Elevating the head of the bed",
                    B: "Frequent suctioning",
                    C: "Prolonged intubation",
                    D: "Low PEEP"
                },
                correctAnswer: "C",
                explanation: "Prolonged intubation significantly increases VAP risk (risk increases after 48 hours)."
            },
            {
                question: "What is the primary cause of auto-PEEP?",
                options: {
                    A: "High tidal volume",
                    B: "Incomplete exhalation",
                    C: "Low respiratory rate",
                    D: "Excessive sedation"
                },
                correctAnswer: "B",
                explanation: "Auto-PEEP (intrinsic PEEP) occurs when there's incomplete exhalation before the next breath, causing air trapping."
            },
            {
                question: "Which medication is commonly used to facilitate sedation during mechanical ventilation?",
                options: {
                    A: "Insulin",
                    B: "Propofol",
                    C: "Furosemide",
                    D: "Heparin"
                },
                correctAnswer: "B",
                explanation: "Propofol is commonly used for sedation in ventilated patients due to its rapid onset/offset."
            },
            {
                question: "What is the primary goal of PEEP?",
                options: {
                    A: "Decrease oxygenation",
                    B: "Prevent alveolar collapse",
                    C: "Reduce heart rate",
                    D: "Increase CO₂ retention"
                },
                correctAnswer: "B",
                explanation: "PEEP (Positive End-Expiratory Pressure) prevents alveolar collapse at end-expiration, improving oxygenation."
            },
            {
                question: "Which of the following is a sign of adequate oxygenation during weaning?",
                options: {
                    A: "SpO₂ ≥ 90%",
                    B: "PaCO₂ > 50 mmHg",
                    C: "Respiratory rate > 35/min",
                    D: "Use of accessory muscles"
                },
                correctAnswer: "A",
                explanation: "SpO₂ ≥ 90% indicates adequate oxygenation during weaning trials."
            },
            {
                question: "What is the primary risk of excessive tidal volume (>10 mL/kg)?",
                options: {
                    A: "Hypotension",
                    B: "Volutrauma",
                    C: "Hypoglycemia",
                    D: "Bradycardia"
                },
                correctAnswer: "B",
                explanation: "Excessive tidal volumes can cause volutrauma (lung injury from overdistension)."
            },
            {
                question: "Which parameter reflects the patient's effort to initiate a breath?",
                options: {
                    A: "PEEP",
                    B: "Sensitivity/Trigger",
                    C: "FiO₂",
                    D: "I:E ratio"
                },
                correctAnswer: "B",
                explanation: "Sensitivity/trigger setting determines how easily the patient can initiate a ventilator breath."
            },
            {
                question: "What is the most common complication of prolonged intubation?",
                options: {
                    A: "Tracheal stenosis",
                    B: "Hypertension",
                    C: "Hyperglycemia",
                    D: "Diarrhea"
                },
                correctAnswer: "A",
                explanation: "Prolonged intubation can lead to tracheal stenosis from pressure necrosis."
            },
            {
                question: "Which ABG value indicates respiratory acidosis?",
                options: {
                    A: "pH 7.50, PaCO₂ 30 mmHg",
                    B: "pH 7.30, PaCO₂ 55 mmHg",
                    C: "pH 7.40, PaCO₂ 40 mmHg",
                    D: "pH 7.60, PaCO₂ 20 mmHg"
                },
                correctAnswer: "B",
                explanation: "Respiratory acidosis is indicated by low pH (<7.35) with high PaCO₂ (>45 mmHg)."
            },
            {
                question: "What is the primary purpose of suctioning a ventilated patient?",
                options: {
                    A: "To reduce heart rate",
                    B: "To maintain a patent airway",
                    C: "To increase PaCO₂",
                    D: "To decrease sedation needs"
                },
                correctAnswer: "B",
                explanation: "Suctioning removes secretions to maintain airway patency and prevent obstruction."
            },
            {
                question: "Which ventilator mode delivers breaths at set intervals regardless of patient effort?",
                options: {
                    A: "Assist-Control (A/C)",
                    B: "Pressure Support (PS)",
                    C: "SIMV",
                    D: "Controlled Mandatory Ventilation (CMV)"
                },
                correctAnswer: "D",
                explanation: "CMV delivers breaths at a set rate regardless of patient effort (used for deeply sedated patients)."
            },
            {
                question: "What is the target plateau pressure (Pplat) in ARDS patients?",
                options: {
                    A: "< 30 cm H₂O",
                    B: "> 40 cm H₂O",
                    C: "50-60 cm H₂O",
                    D: "10-15 cm H₂O"
                },
                correctAnswer: "A",
                explanation: "In ARDS, plateau pressure should be kept <30 cm H₂O to prevent ventilator-induced lung injury."
            },
            {
                question: "Which of the following increases the risk of aspiration in ventilated patients?",
                options: {
                    A: "Elevating the head of the bed",
                    B: "Cuff underinflation",
                    C: "Frequent oral care",
                    D: "Low PEEP"
                },
                correctAnswer: "B",
                explanation: "Underinflated ETT cuffs increase aspiration risk by allowing secretions to leak past the tube."
            },
            {
                question: "What is the first step in troubleshooting a low-pressure alarm?",
                options: {
                    A: "Increase FiO₂",
                    B: "Check for circuit disconnection",
                    C: "Administer bronchodilators",
                    D: "Silence the alarm"
                },
                correctAnswer: "B",
                explanation: "First check for disconnections or leaks in the ventilator circuit when a low-pressure alarm sounds."
            },
            {
                question: "Which condition is a contraindication for PEEP?",
                options: {
                    A: "Hypoxemia",
                    B: "Severe hypotension",
                    C: "ARDS",
                    D: "Pneumonia"
                },
                correctAnswer: "B",
                explanation: "Severe hypotension is a relative contraindication for PEEP as it may further decrease venous return and cardiac output."
            },
            {
                question: "What is the primary advantage of pressure support ventilation (PSV)?",
                options: {
                    A: "Guarantees minute ventilation",
                    B: "Reduces patient work of breathing",
                    C: "Requires no patient effort",
                    D: "Increases PaCO₂"
                },
                correctAnswer: "B",
                explanation: "PSV reduces the work of breathing by providing pressure support for each spontaneous breath."
            },
            {
                question: "Which medication is used to facilitate ventilator synchrony in agitated patients?",
                options: {
                    A: "Heparin",
                    B: "Furosemide",
                    C: "Sedatives (e.g., midazolam)",
                    D: "Insulin"
                },
                correctAnswer: "C",
                explanation: "Sedatives like midazolam help reduce agitation and improve patient-ventilator synchrony."
            },
            {
                question: "What is the minimum recommended cuff pressure for an ETT (cm H₂O)?",
                options: {
                    A: "5-10",
                    B: "20-25",
                    C: "30-35",
                    D: "40-45"
                },
                correctAnswer: "B",
                explanation: "ETT cuff pressure should be maintained at 20-25 cm H₂O to prevent aspiration while minimizing tracheal injury."
            },
            {
                question: "Which of the following is a late sign of hypoxia?",
                options: {
                    A: "Restlessness",
                    B: "Cyanosis",
                    C: "Tachycardia",
                    D: "Hypertension"
                },
                correctAnswer: "B",
                explanation: "Cyanosis is a late sign of hypoxia (SaO₂ typically <80% when visible)."
            },
            {
                question: "What is the primary cause of auto-PEEP in COPD patients?",
                options: {
                    A: "Rapid respiratory rate",
                    B: "Low tidal volume",
                    C: "Excessive PEEP",
                    D: "Air trapping"
                },
                correctAnswer: "D",
                explanation: "In COPD, air trapping due to narrowed airways and loss of elastic recoil is the primary cause of auto-PEEP."
            },
            {
                question: "Which ventilator setting adjusts the speed of inspiratory flow?",
                options: {
                    A: "FiO₂",
                    B: "I:E ratio",
                    C: "PEEP",
                    D: "Sensitivity"
                },
                correctAnswer: "B",
                explanation: "The I:E ratio adjusts the speed of inspiratory flow by altering the time spent in inspiration vs expiration."
            },
            {
                question: "What is the primary goal of a spontaneous breathing trial (SBT)?",
                options: {
                    A: "To assess readiness for extubation",
                    B: "To increase sedation",
                    C: "To reduce heart rate",
                    D: "To decrease oxygenation"
                },
                correctAnswer: "A",
                explanation: "SBTs assess whether the patient can maintain adequate ventilation without ventilator support."
            },
            {
                question: "Which of the following is a nursing priority for preventing VAP?",
                options: {
                    A: "Supine positioning",
                    B: "Minimal oral care",
                    C: "Elevating the head of the bed 30-45°",
                    D: "Avoiding hand hygiene"
                },
                correctAnswer: "C",
                explanation: "Elevating the head reduces aspiration risk and is a key VAP prevention strategy."
            },
            {
                question: "What is the most reliable indicator of successful weaning?",
                options: {
                    A: "Patient self-report",
                    B: "Stable vital signs and ABGs during SBT",
                    C: "Increased sedation needs",
                    D: "Decreased SpO₂"
                },
                correctAnswer: "B",
                explanation: "Stable vital signs and ABGs during a spontaneous breathing trial are the most objective indicators of weaning readiness."
            }
        ];
        
        // متغيرات التطبيق
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let selectedOption = null;
        let countdownTimer = null;
        
        // عناصر DOM
        const questionTextElement = document.getElementById('question-text');
        const optionsContainerElement = document.getElementById('options-container');
        const feedbackElement = document.getElementById('feedback');
        const nextButton = document.getElementById('next-btn');
        const prevButton = document.getElementById('prev-btn');
        const scoreElement = document.getElementById('score');
        const correctCountElement = document.getElementById('correct-count');
        const incorrectCountElement = document.getElementById('incorrect-count');
        const progressBarElement = document.getElementById('progress-bar');
        const currentQuestionElement = document.getElementById('current-question');
        const totalQuestionsElement = document.getElementById('total-questions');
        
        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', () => {
            totalQuestionsElement.textContent = questions.length;
            loadQuestion();
            updateStats();
        });
        
        // تحميل السؤال الحالي
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                currentQuestionIndex = 0;
            }
            
            const currentQuestion = questions[currentQuestionIndex];
            questionTextElement.textContent = currentQuestion.question;
            
            optionsContainerElement.innerHTML = '';
            for (const [key, value] of Object.entries(currentQuestion.options)) {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <span class="option-letter">${key}</span>
                    <span class="option-text">${value}</span>
                `;
                optionElement.dataset.option = key;
                optionElement.addEventListener('click', () => selectOption(optionElement));
                optionsContainerElement.appendChild(optionElement);
            }
            
            feedbackElement.style.display = 'none';
            selectedOption = null;
            
            // تحديث شريط التقدم وعداد الأسئلة
            progressBarElement.style.width = `${(currentQuestionIndex / questions.length) * 100}%`;
            currentQuestionElement.textContent = currentQuestionIndex + 1;
            
            // تعطيل زر السابق إذا كنا في السؤال الأول
            prevButton.disabled = currentQuestionIndex === 0;
            
            // إلغاء أي عد تنازلي سابق
            if (countdownTimer) {
                clearTimeout(countdownTimer);
                countdownTimer = null;
            }
        }
        
        // اختيار إجابة
        function selectOption(optionElement) {
            if (feedbackElement.style.display === 'block') return;
            
            // إزالة التحديد من جميع الخيارات
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // تحديد الخيار المختار
            optionElement.classList.add('selected');
            selectedOption = optionElement.dataset.option;
            
            // التحقق من الإجابة مباشرة عند الاختيار
            checkAnswer();
        }
        
        // التالي
        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }
        
        // السابق
        function prevQuestion() {
            currentQuestionIndex--;
            loadQuestion();
        }
        
        // التحقق من الإجابة
        function checkAnswer() {
            if (!selectedOption) return;
            
            const currentQuestion = questions[currentQuestionIndex];
            const optionElements = document.querySelectorAll('.option');
            
            optionElements.forEach(element => {
                element.classList.remove('correct', 'incorrect');
                if (element.dataset.option === currentQuestion.correctAnswer) {
                    element.classList.add('correct');
                } else if (element.dataset.option === selectedOption && selectedOption !== currentQuestion.correctAnswer) {
                    element.classList.add('incorrect');
                }
            });
            
            if (selectedOption === currentQuestion.correctAnswer) {
                score += 10;
                correctAnswers++;
                feedbackElement.innerHTML = `
                    <i class="fas fa-check-circle feedback-icon"></i>
                    Correct! +10 points
                    <p>${currentQuestion.explanation || ''}</p>
                `;
                feedbackElement.className = 'feedback correct';
                
                // الانتقال للسؤال التالي بعد ثانية واحدة إذا كانت الإجابة صحيحة
                countdownTimer = setTimeout(nextQuestion, 1000);
            } else {
                incorrectAnswers++;
                feedbackElement.innerHTML = `
                    <i class="fas fa-times-circle feedback-icon"></i>
                    Incorrect! The correct answer is ${currentQuestion.correctAnswer}) ${currentQuestion.options[currentQuestion.correctAnswer]}
                    <p>${currentQuestion.explanation || ''}</p>
                    <div style="margin-top: 10px;">Moving to next question in <span class="countdown">3</span> seconds...</div>
                `;
                feedbackElement.className = 'feedback incorrect';
                
                // بدء العد التنازلي للانتقال للسؤال التالي بعد 3 ثواني
                let seconds = 3;
                const countdownElement = feedbackElement.querySelector('.countdown');
                countdownElement.textContent = seconds;
                
                const countdownInterval = setInterval(() => {
                    seconds--;
                    countdownElement.textContent = seconds;
                    
                    if (seconds <= 0) {
                        clearInterval(countdownInterval);
                        nextQuestion();
                    }
                }, 1000);
            }
            
            feedbackElement.style.display = 'block';
            updateStats();
        }
        
        // عرض تلميح
        function showHint() {
            const currentQuestion = questions[currentQuestionIndex];
            alert(`Hint: ${currentQuestion.explanation || 'No hint available for this question'}`);
        }
        
        // تحديث الإحصائيات
        function updateStats() {
            scoreElement.textContent = score;
            correctCountElement.textContent = correctAnswers;
            incorrectCountElement.textContent = incorrectAnswers;
        }
    </script>
</body>
</html>